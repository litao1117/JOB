RPC:远程过程调用，拆开理解：过程也叫方法或函数，远程就是说方法不在当前进程里，而是在其他进程或机器上面，
合起来 RPC 就是调用其他进程或机器上面的函数。

## 基本原理

主流 RPC 框架分为基于 HTTP 和基于 TCP 的两种。

#### 基于 TCP 的 RPC 调用基本流程

1. 调用方通过本地 RPC 代理调用相应的接口
2. 本地代理将 RPC 的服务名，方法名和参数等信息转换成一个标准的 RPC Request 对象交给 RPC 框架
3. RPC 框架采用 RPC 协议将 RPC Request 对象序列化成二进制形式，然后通过 TCP 通道传递给服务提供方
4. 服务端收到二进制数据后，将它反序列化成 RPC Request 对象
5. 服务端根据 RPC Request 中的信息找到本地对应的方法，传入参数执行，得到结果，并将结果封装成 RPC Response 交给 RPC 框架
6. RPC 框架通过 RPC 协议将 RPC Response 对象序列化成二进制形式，然后通过 TCP 通道传递给服务调用方
7. 调用方收到二进制数据后，将它反序列化成 RPC Response 对象，并将结果通过本地代理返回给业务代码

#### RPC 协议

-   通讯层协议：如 gRPC，与业务无关，它的职责是将业务数据打包后安全、完整的传输给接受方
-   应用层协议：约定业务数据和二进制串的转换规则。
    这两种协议的关注点不太一样，通讯层协议一旦确定就很少变化，这要求它具备足够好的通用性和扩展性；而应用层协议理论上可以由业务自由选择，它更多的是关注编码的效率和跨语言等特性。
